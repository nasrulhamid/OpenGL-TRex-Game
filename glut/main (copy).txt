/*
 * T-REX ROBO KOM300
 * 
 * G64164017	NASRUL HAMID
 * G64164021	MUHAMMAD JAKA UTAMA
 * G64164053	ISMAIL ADIMA
 * 
 */

#include <iostream>
#include <GL/glut.h>

void grid(int baris, int kolom) {

    // draw grid on floor (0,0,0)
    int i;

    int kiri  = -kolom / 2;
    int kanan = kolom / 2;
    int bawah = -baris / 2;
    int atas  = baris / 2;

    glBegin(GL_LINES);
    glLineWidth(1);

    for (i = 0; i < baris + 1; i++) {
        glVertex2f(kiri, baris / 2 - i);
        glVertex2f(kanan, baris / 2 - i);
    }

    for (i = 0; i < kolom + 1; i++) {
        glVertex2f(kolom / 2 - i, bawah);
        glVertex2f(kolom / 2 - i, atas);
    }

    glEnd();
}



void changeSize(int w, int h) {

	// Prevent a divide by zero, when window is too short
	// (you cant make a window of zero width).
	if (h == 0)	h = 1;

	//float ratio =  w * 1.0 / h;
	
    //ratio = width / (float) height;
    glViewport(0, 0, w, h);
    
    glClear(GL_COLOR_BUFFER_BIT);

	// Use the Projection Matrix
	glMatrixMode(GL_PROJECTION);

	// Reset Matrix
	glLoadIdentity();

	// Set the viewport to be the entire window
	glViewport(0, 0, w, h);
	

	// Set the correct perspective.
	//gluPerspective(90,ratio,1,100);
	//gluPerspective(0,1,1,100);
	
	//glOrtho(-w/20, w/20, -h/20, h/20, 1.f, -1.f);
	glOrtho(0, w/10, 0, h/10, 1.f, -1.f);
	//glOrtho(-40, 40, -20, 20, 1.f, -1.f);

	// Get Back to the Modelview
	glMatrixMode(GL_MODELVIEW);
	glLoadIdentity();
}

void genKarakter(int idKarakter){
	switch (idKarakter){
	case 1:	// T-REX DEFINITION
		//perut
		glBegin(GL_POLYGON);
			glVertex2f(4.6,3.3);	// ekor
			glVertex2f(8.6,3.3);
			glVertex2f(10.5,5.5);
			glVertex2f(10.5,5.5);
			glVertex2f(10.5,9);		// kepala
			glVertex2f(8.3,9);		// kepala
			glVertex2f(4.7,6.7);	// ekor
		glEnd();
		//ekor
		glBegin(GL_POLYGON);
			glVertex2f(2.3,5.7);
			glVertex2f(4.7,3.3);	// perut
			glVertex2f(4.7,6.7);	// perut
			glVertex2f(3,8);
			glVertex2f(2.3,9);
		glEnd();
		//tangan
		glBegin(GL_TRIANGLE_STRIP);
			glVertex2f(10.5,7.5);	// perut
			glVertex2f(10.5,8);		// perut
			glVertex2f(11.3,7.5);
			glVertex2f(11.7,8);
			glVertex2f(11.3,6.7);
			glVertex2f(11.7,6.7);
		glEnd();
		//kepala
		glBegin(GL_POLYGON);
			glVertex2f(8.3,9);		// perut
			glVertex2f(10.5,9);		// perut, mulut
			glVertex2f(11,9.7);		// mulut	
			glVertex2f(11,10.3);			
			glVertex2f(14,10.3);			
			glVertex2f(14,13);			
			glVertex2f(13.5,13.5);			
			glVertex2f(9,13.5);			
			glVertex2f(8.3,13);			
		glEnd();
		//mulut
		glBegin(GL_POLYGON);			
			glVertex2f(10.5,9);		//kepala
			glVertex2f(13,9);
			glVertex2f(13,9.7);
			glVertex2f(11,9.7);		//kepala
		glEnd();
		break;
	}
}

void display()
{	
	glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
	
	/*
	glPushMatrix();
	grid(20,80);
	glPopMatrix();
	*/
	
	glPushMatrix();
	glColor3ub(255,255,255);
	glLineWidth(2);
	genKarakter(1);
	glPopMatrix();
	
	glutSwapBuffers();
}

int main(int argc, char **argv)
{
	glutInit( &argc, argv );
	glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
	glutInitWindowSize(800,200);
	glutCreateWindow("T-Rex Robo");
	
	
	glutDisplayFunc(display);
	glutReshapeFunc(changeSize);
	glutIdleFunc(display);
	
	// here are the new entries
	//glutKeyboardFunc(processNormalKeys);
	//glutSpecialFunc(processSpecialKeys);
	//glutMouseFunc(processMouse);
	
	glutMainLoop();
	
	return 0;
}

